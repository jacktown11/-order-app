(function(t){function s(s){for(var a,r,o=s[0],l=s[1],c=s[2],d=0,p=[];d<o.length;d++)r=o[d],i[r]&&p.push(i[r][0]),i[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(s);while(p.length)p.shift()();return n.push.apply(n,c||[]),e()}function e(){for(var t,s=0;s<n.length;s++){for(var e=n[s],a=!0,o=1;o<e.length;o++){var l=e[o];0!==i[l]&&(a=!1)}a&&(n.splice(s--,1),t=r(r.s=e[0]))}return t}var a={},i={app:0},n=[];function r(s){if(a[s])return a[s].exports;var e=a[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=a,r.d=function(t,s,e){r.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,s){if(1&s&&(t=r(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var a in t)r.d(e,a,function(s){return t[s]}.bind(null,a));return e},r.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(s,"a",s),s},r.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},r.p="/order-app/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=s,o=o.slice();for(var c=0;c<o.length;c++)s(o[c]);var u=l;n.push([0,"chunk-vendors"]),e()})({0:function(t,s,e){t.exports=e("56d7")},"001b":function(t,s,e){},"08cc":function(t,s,e){"use strict";var a=e("48f1"),i=e.n(a);i.a},"123d":function(t,s,e){},"13d2":function(t,s,e){"use strict";var a=e("de5c"),i=e.n(a);i.a},"20e5":function(t,s,e){},2577:function(t,s,e){"use strict";var a=e("20e5"),i=e.n(a);i.a},"2dac":function(t,s,e){},3550:function(t,s,e){"use strict";var a=e("c1f2"),i=e.n(a);i.a},"3b0f":function(t,s,e){"use strict";var a=e("001b"),i=e.n(a);i.a},"4362d":function(t,s,e){"use strict";var a=e("b5f2"),i=e.n(a);i.a},4810:function(t,s,e){"use strict";var a=e("2dac"),i=e.n(a);i.a},4840:function(t,s,e){},"48f1":function(t,s,e){},"56d7":function(t,s,e){"use strict";e.r(s);e("cadf"),e("551c"),e("097d");var a=e("2b0e"),i=e("bc3a"),n=e.n(i),r=e("8c4f"),o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"goods"},[e("div",{ref:"menu",staticClass:"menu-wrapper menu-wrapper-hook"},[t.goods.length>0?e("ul",t._l(t.goods,function(s,a){return e("li",{key:s.name,staticClass:"category-wrapper border-bottom-1px category-wrapper-hook",class:{current:a===t.currentIndex},on:{click:function(s){t.selectCategory(s,a)}}},[e("span",{staticClass:"category"},[s.type>=0?e("base-icon",{staticClass:"category-icon",attrs:{typeNum:s.type,suffixNum:3}}):t._e(),e("span",{staticClass:"name"},[t._v(t._s(s.name))])],1)])}),0):t._e()]),e("div",{ref:"goods",staticClass:"goods-wrapper"},[e("ul",t._l(t.goods,function(s){return e("li",{key:s.name,staticClass:"food-category-list food-category-list-hook"},[e("h2",{staticClass:"category-name"},[t._v(t._s(s.name))]),e("ul",{staticClass:"food-category"},t._l(s.foods,function(s){return e("li",{key:s.name,staticClass:"food-item",on:{click:function(e){t.selectFood(s,e)}}},[e("div",{staticClass:"food-pic"},[e("img",{staticClass:"picture",attrs:{src:s.image,alt:"食物图片"}})]),e("div",{staticClass:"food-info"},[e("h3",{staticClass:"name"},[t._v(t._s(s.name))]),s.description?e("p",{staticClass:"description"},[t._v(t._s(s.description))]):t._e(),e("p",{staticClass:"sell-status"},[e("span",{staticClass:"count"},[t._v("月售"+t._s(s.sellCount)+"份")]),e("span",{staticClass:"ratings"},[t._v("好评率"+t._s(s.rating)+"%")])]),e("p",{staticClass:"price"},[e("span",{staticClass:"now"},[t._v("¥"),e("span",{staticClass:"number"},[t._v(t._s(s.price))])]),s.oldPrice?e("span",{staticClass:"old"},[t._v("¥"),e("span",{staticClass:"number"},[t._v(t._s(s.oldPrice))])]):t._e()]),e("div",{staticClass:"food-handler-wrapper"},[e("base-food-handler",{attrs:{food:s},on:{"update-cart":function(s){t.updateCart(s)},"add-animate":function(s){t.addAnimate(s)}}})],1)])])}),0)])}),0)]),e("o-shopcart",{ref:"cartContent",attrs:{seller:t.seller,"cart-content":t.cartContent}}),e("transition",{attrs:{name:"show-food"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowFood,expression:"isShowFood"}],staticClass:"o-food-wrapper"},[e("o-food",{attrs:{food:t.selectedFood},on:{"hide-food":t.hideFood,"add-animate":function(s){t.addAnimate(s)}}})],1)])],1)},l=[],c=(e("ac6a"),e("1fba")),u=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"icon",class:t.classArr})},d=[],p=(e("c5f6"),{props:{typeNum:{type:Number},suffixNum:{type:Number}},data:function(){return{typeClsMap:["decrease","discount","special","invoice","guarantee"],sizeClsMap:["size12","size16"]}},computed:{classArr:function(){var t=this.typeClsMap[this.typeNum],s=t+"_"+this.suffixNum,e=this.sizeClsMap[(this.suffixNum+1)%2];return[t,s,e]}}}),f=p,v=(e("08cc"),e("2877")),h=Object(v["a"])(f,u,d,!1,null,"c2726ef6",null);h.options.__file="base-icon.vue";var m=h.exports,C=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"food-handler",on:{click:function(t){t.stopPropagation()}}},[e("transition",{attrs:{name:"move"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEmpty,expression:"!isEmpty"}],staticClass:"decrease",on:{click:t.minus}},[e("div",{staticClass:"inner"},[e("span",{staticClass:"icon-remove_circle_outline"})])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEmpty,expression:"!isEmpty"}],staticClass:"count"},[t._v(t._s(t.food.count))]),e("div",{ref:"increase",staticClass:"increase",on:{click:t.add}},[e("span",{staticClass:"icon-add_circle"})])],1)},_=[],g={props:{food:{type:Object,default:function(){return{}}}},computed:{isEmpty:function(){return!this.food.count}},methods:{add:function(){this.food.count?this.food.count++:a["a"].set(this.food,"count",1);var t=this.$refs.increase.getBoundingClientRect();this.$emit("add-animate",{x:t.left+14,y:t.top+14})},minus:function(){this.food.count>0&&this.food.count--}}},b=g,w=(e("7f96"),Object(v["a"])(b,C,_,!1,null,"c4852bba",null));w.options.__file="base-food-handler.vue";var y=w.exports,x=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shopcart"},[e("div",{staticClass:"content-left"},[e("div",{staticClass:"cart-icon-wrapper",on:{click:t.toggleDetail}},[e("div",{staticClass:"cart-icon",class:{highlight:!t.isEmpty}},[e("span",{staticClass:"icon-shopping_cart"})])]),e("div",{staticClass:"foods-price",class:{highlight:!t.isEmpty}},[t._v("\n      ¥"+t._s(t.foodsPrice)+"\n    ")]),e("div",{staticClass:"delivery-price"},[t._v("\n      另需配送费¥"+t._s(t.seller.deliveryPrice)+"元\n    ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.foodsCount>0,expression:"foodsCount > 0"}],staticClass:"foods-count"},[t._v(t._s(t.foodsCount))])]),e("div",{staticClass:"content-right",class:{highlight:t.isEnough},domProps:{innerHTML:t._s(t.stateStr)},on:{click:t.pay}}),e("div",{staticClass:"ball-container"},t._l(t.balls,function(s){return e("transition",{key:s.index,attrs:{name:"drop"},on:{"before-enter":function(e){t.beforeEnter(s)},enter:function(e){t.enter(s)},"after-enter":function(e){t.afterEnter(s)},afterLeave:function(e){t.afterLeave(s)}}},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.isShow,expression:"ball.isShow"}],ref:"ballEle",refInFor:!0,staticClass:"ball"},[e("div",{staticClass:"inner inner-hook"})])])}),1),e("transition",{attrs:{name:"slide"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowDetail,expression:"isShowDetail"}],staticClass:"cart-detail"},[e("div",{staticClass:"header"},[e("h2",{staticClass:"title"},[t._v("购物车")]),e("button",{staticClass:"clear",on:{click:t.clearCart}},[t._v("清空")])]),e("div",{ref:"foodListWrapper",staticClass:"food-list-wrapper"},[e("ul",{staticClass:"food-list"},t._l(t.cartContent,function(s){return e("li",{key:s.name,staticClass:"food-item"},[e("h3",{staticClass:"food-name"},[t._v(t._s(s.name))]),e("span",{staticClass:"food-price"},[e("span",{staticClass:"prefix"},[t._v("¥")]),t._v(t._s(s.price))]),e("div",{staticClass:"food-handler-wrapper"},[e("base-food-handler",{attrs:{food:s}})],1)])}),0)])])]),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowDetail,expression:"isShowDetail"}],staticClass:"grey-mask",on:{click:t.hideDetail}})])],1)},S=[],k={components:{BaseFoodHandler:y},props:{seller:{type:Object,default:function(){return{}}},cartContent:{type:Array,default:function(){return[]}}},data:function(){return{balls:[{index:0,isShow:!1,startPos:null},{index:1,isShow:!1,startPos:null},{index:2,isShow:!1,startPos:null},{index:3,isShow:!1,startPos:null},{index:4,isShow:!1,startPos:null}],usedBalls:[],tasks:[],isShowDetail:!1}},mounted:function(){var t=this;this.ballEndPos={x:40,y:window.innerHeight-30},this.balls.forEach(function(s){s.ele=t.$refs.ballEle[s.index]})},computed:{minPrice:function(){return this.seller.minPrice},foodsPrice:function(){return this.cartContent.reduce(function(t,s){return t+s.price*s.count},0)},totalPrice:function(){return this.foodsPrice+this.seller.deliveryPrice},foodsCount:function(){return this.cartContent.reduce(function(t,s){return t+s.count},0)},isEmpty:function(){return 0===this.foodsCount},isEnough:function(){return this.totalPrice>=this.minPrice},stateStr:function(){return this.isEmpty?"&#00165;20起送":this.isEnough?"去结算":"还差&#00165;".concat(this.minPrice-this.foodsPrice-this.seller.deliveryPrice,"起送")}},watch:{isShowDetail:function(t){var s=this,e=this.$refs.foodListWrapper;t&&this.$nextTick(function(){s.scroll?s.scroll.refresh():s.scroll=new c["a"](e,{click:!0})})},isEmpty:function(t){t&&(this.isShowDetail=!1)}},methods:{clearCart:function(){while(this.cartContent.length>0)this.cartContent.pop().count=0},hideDetail:function(){this.isShowDetail=!1},toggleDetail:function(){this.isEmpty?this.isShowDetail=!1:this.isShowDetail=!this.isShowDetail},pay:function(){this.isEnough&&(this.clearCart(),window.alert("这次帮你买好单了，等着享用吧:)"))},drop:function(t){this.tasks.push(t),this.doTask()},doTask:function(){if(0!==this.tasks.length){var t=this.balls.length;if(this.usedBalls.length!==t)for(var s=0;s<t;s++)if(this.usedBalls.indexOf(this.balls[s])<0){var e=this.tasks.shift(),a=this.balls[s];return a.startPos=e,a.isShow=!0,void this.usedBalls.push(a)}}},beforeEnter:function(t){var s=t.startPos.x-this.ballEndPos.x,e=t.startPos.y-this.ballEndPos.y;t.ele.style.transform="translate3d(".concat(s,"px, 0, 0)"),t.ele.getElementsByClassName("inner-hook")[0].style.transform="translate3d(0, ".concat(e,"px, 0)")},enter:function(t){var s=t.ele;s.offsetWidth;this.$nextTick(function(){s.style.transform="translate3d(0, 0, 0)",s.getElementsByClassName("inner-hook")[0].style.transform="translate3d(0, 0, 0)"})},afterEnter:function(t){t.isShow=!1,t.ele.display="none",this.usedBalls.shift()},afterLeave:function(t){t.ele.offsetWidth;this.doTask()}}},T=k,E=(e("4810"),Object(v["a"])(T,x,S,!1,null,"70cfd8a6",null));E.options.__file="o-shopcart.vue";var O=E.exports,$=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"foodWrapper",staticClass:"food-wrapper"},[e("div",{staticClass:"food"},[e("div",{staticClass:"food-overview"},[e("div",{staticClass:"food-img"},[e("div",{staticClass:"back-icon",on:{click:t.hideFood}},[e("span",{staticClass:"icon-arrow_lift"})]),e("img",{staticClass:"img",attrs:{src:t.food.image,alt:"商品大图"}})]),e("div",{staticClass:"food-info"},[e("h2",{staticClass:"title"},[t._v(t._s(t.food.name))]),e("p",{staticClass:"sell-state"},[e("span",{staticClass:"sell-count"},[t._v("月售"+t._s(t.food.sellCount)+"份")]),e("span",{staticClass:"satisfied-rate"},[t._v("好评率"+t._s(t.food.rating)+"%")])]),e("p",{staticClass:"price"},[e("span",{staticClass:"now"},[t._v("\n            ¥"),e("span",{staticClass:"number"},[t._v(t._s(t.food.price))])]),t.food.oldPrice?e("span",{staticClass:"old"},[t._v("\n            ¥"),e("span",{staticClass:"number"},[t._v(t._s(t.food.oldPrice))])]):t._e()]),e("div",{staticClass:"food-handler-wrapper"},[e("base-food-handler",{attrs:{food:t.food},on:{"add-animate":function(s){t.addAnimate(s)}}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.food.count,expression:"!food.count"}],staticClass:"add-to-cart",on:{click:t.addToCart}},[t._v("加入购物车")])])]),t.food.info?e("div",{staticClass:"base-split-wrapper"},[e("base-split")],1):t._e(),t.food.info?e("div",{staticClass:"food-intro"},[e("h2",{staticClass:"title"},[t._v("商品介绍")]),e("p",{staticClass:"intro-text"},[t._v(t._s(t.food.info))])]):t._e(),e("div",{staticClass:"base-split-wrapper"},[e("base-split")],1),e("div",{staticClass:"o-rating-panel-wrapper"},[e("o-rating-panel",{attrs:{"rating-title":"商品评价","type-strs":["全部","推荐","吐槽"],ratings:t.food.ratings}})],1)])])},P=[],N=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrapper"})},j=[],B={},D=B,F=(e("13d2"),Object(v["a"])(D,N,j,!1,null,"05542a9e",null));F.options.__file="base-split.vue";var I=F.exports,M=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"controller"},[t.ratingTitle?e("h2",{staticClass:"rating-title"},[t._v(t._s(t.ratingTitle))]):t._e(),e("ul",{staticClass:"type-selector-wrapper border-bottom-1px"},t._l(t.typeMap,function(s){return e("li",{key:s.type,staticClass:"type-selector",class:[s.cls,{active:t.selectedType===s.type}],on:{click:function(e){t.selectType(s.type)}}},[t._v(t._s(s.str)+" "),e("span",{staticClass:"count"},[t._v(t._s(s.count))])])}),0),e("div",{staticClass:"only-show-text"},[e("button",{staticClass:"toggle-btn",class:{active:t.onlyShowText},on:{click:t.toggleOnlyShowText}},[e("span",{staticClass:"icon-check_circle"})]),e("span",{staticClass:"text"},[t._v("只看有内容的评价")])])]),e("div",{staticClass:"rating-list-wrapper"},[e("ul",{staticClass:"rating-list"},t._l(t.filteredRatings,function(s){return e("li",{key:s.rateTime+s.text,staticClass:"o-food-rating-item-wrapper border-bottom-1px"},[t.isForFood?e("o-rating-item-food",{attrs:{rating:s}}):e("o-rating-item-seller",{attrs:{rating:s}})],1)}),0),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.ratings||0===t.ratings.length,expression:"!ratings || ratings.length === 0"}],staticClass:"no-rating"},[t._v("暂无评论")])])])},A=[],R=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"about"},[e("div",{staticClass:"rate-time-wrapper"},[e("base-time",{attrs:{time:t.rating.rateTime}})],1),e("div",{staticClass:"username"},[t._v(t._s(t.rating.username))]),e("div",{staticClass:"user-avatar"},[e("img",{staticClass:"avatar",attrs:{src:t.rating.avatar,alt:"评论者头像"}})])]),e("p",{staticClass:"content"},[e("span",{staticClass:"thumb-gesture"},[e("span",{class:t.thumbCls})]),e("span",{staticClass:"text"},[t._v(t._s(t.rating.text))])])])},H=[],z=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"time"},[t._v(t._s(t.formattedTime))])},W=[];e("a481"),e("3b2b");function L(t,s){var e=t+"";if(e.length<s)for(var a=0;a<s;a++)e="0"+e;return e.slice(-s)}function Y(t,s){var e={"y+":t.getFullYear(),"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var a in e){var i=new RegExp("(".concat(a,")")),n=e[a];i.test(s)&&(s=s.replace(i,1===RegExp.$1.length?n:L(n,RegExp.$1.length)))}return s}var G={props:{time:{type:Number,default:(new Date).getTime()}},computed:{formattedTime:function(){return Y(new Date(this.time),"yyyy-MM-dd hh:mm")}}},J=G,U=(e("3b0f"),Object(v["a"])(J,z,W,!1,null,"43d808c0",null));U.options.__file="base-time.vue";var K=U.exports,X=0,q=1,Q={components:{BaseTime:K},props:{rating:{type:Object,default:function(){return{}}}},computed:{thumbCls:function(){var t=this.rating.rateType;return{"icon-thumb_up":t===X,"icon-thumb_down":t===q}}}},V=Q,Z=(e("f753"),Object(v["a"])(V,R,H,!1,null,"52382372",null));Z.options.__file="o-rating-item-food.vue";var tt=Z.exports,st=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"rating-item-seller-wrapper"},[e("div",{staticClass:"user-info clearfix"},[e("div",{staticClass:"avatar-wrapper"},[e("img",{staticClass:"avatar",attrs:{src:t.rating.avatar,alt:"评论者头像"}})]),e("p",{staticClass:"username"},[t._v(t._s(t.rating.username))]),e("div",{staticClass:"o-rate-time-wrapper"},[e("base-time",{attrs:{time:t.rating.rateTime}})],1)]),e("div",{staticClass:"rating-star"},[e("div",{staticClass:"base-star-bar-wrapper"},[e("base-star-bar",{attrs:{size:24,score:t.rating.score}})],1),e("div",{staticClass:"delivery-time"},[t._v(t._s(t.rating.deliveryTime)+"分钟送达")])]),t.rating.text?e("p",{staticClass:"rating"},[t._v(t._s(t.rating.text))]):t._e(),e("div",{staticClass:"recommend-wrapper"},[e("span",{staticClass:"thumb",class:t.thumbCls}),t.rating.recommend&&t.rating.recommend.length>0?t._l(t.rating.recommend,function(s){return e("span",{key:s,staticClass:"recommend-item"},[t._v(t._s(s))])}):t._e()],2)])},et=[],at=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"star-bar",class:t.starType},t._l(t.starClassArr,function(t,s){return e("span",{key:s,staticClass:"star-item",class:t})}),0)},it=[],nt=5,rt="on",ot="half",lt="off",ct={props:{size:{type:Number},score:{type:Number}},computed:{starType:function(){return"star-"+this.size},starClassArr:function(){var t=[],s=this.score;while(s>=1)t.push(rt),s--;s>=.5&&t.push(ot);while(t.length<nt)t.push(lt);return t}}},ut=ct,dt=(e("7720"),Object(v["a"])(ut,at,it,!1,null,"1de6892b",null));dt.options.__file="base-star-bar.vue";var pt=dt.exports,ft=0,vt=1,ht={components:{BaseStarBar:pt,BaseTime:K},props:{rating:{type:Object,default:function(){return{}}}},computed:{thumbCls:function(){var t=this.rating.rateType;return{"icon-thumb_up":t===ft,"icon-thumb_down":t===vt}}}},mt=ht,Ct=(e("3550"),Object(v["a"])(mt,st,et,!1,null,"4763172c",null));Ct.options.__file="o-rating-item-seller.vue";var _t=Ct.exports,gt=0,bt=1,wt=2,yt={components:{ORatingItemFood:tt,ORatingItemSeller:_t},props:{ratingTitle:{type:String,default:""},typeStrs:{type:Array,default:function(){return["全部","满意","不满意"]}},ratings:{type:Array,default:function(){return[]}},isForFood:{type:Boolean,default:!0}},data:function(){return{selectedType:wt,onlyShowText:!1}},computed:{typeMap:function(){var t=this.typeStrs,s=this.ratings.length,e=this.ratings.reduce(function(t,s){return(s.rateType===gt?1:0)+t},0);return[{str:t[0],type:wt,cls:"all",count:s},{str:t[1],type:gt,cls:"good",count:e},{str:t[2],type:bt,cls:"bad",count:s-e}]},filteredRatings:function(){var t=this;return this.ratings.filter(function(s){return!(t.onlyShowText&&!s.text)&&(t.selectedType===wt||t.selectedType===s.rateType)})}},watch:{ratings:function(){this.selectedType=wt,this.onlyShowText=!1}},methods:{selectType:function(t){this.selectedType=t},toggleOnlyShowText:function(){this.onlyShowText=!this.onlyShowText}}},xt=yt,St=(e("def4"),Object(v["a"])(xt,M,A,!1,null,"40547a1a",null));St.options.__file="o-rating-panel.vue";var kt=St.exports,Tt={components:{BaseFoodHandler:y,BaseSplit:I,ORatingPanel:kt},props:{food:{type:Object,default:function(){return{}}}},mounted:function(){this._initScroll()},updated:function(){this._scroll.refresh()},methods:{hideFood:function(){this.$emit("hide-food")},addToCart:function(t){t._constructed&&(a["a"].set(this.food,"count",1),this.addAnimate({x:t.pageX,y:t.pageY}))},addAnimate:function(t){this.$emit("add-animate",t)},_initScroll:function(){this._scroll=new c["a"](this.$refs.foodWrapper,{click:!0})}}},Et=Tt,Ot=(e("d7f1"),Object(v["a"])(Et,$,P,!1,null,"6a238c7b",null));Ot.options.__file="o-food.vue";var $t=Ot.exports,Pt=0,Nt={components:{BaseIcon:m,BaseFoodHandler:y,OShopcart:O,OFood:$t},props:{seller:{type:Object}},data:function(){return{goods:[],goodsHeight:[],scrollY:0,_menuScroll:null,_goodsScroll:null,_elInGoods:null,_elInMenu:null,isClicked:!1,selectedFood:{},isShowFood:!1}},created:function(){var t=this;this.$http.get("/api/goods").then(function(s){var e=s.data;e.errNum===Pt&&(t.goods=e.data,t.$nextTick(function(){t._calculateHeight(),t._initScroll(),t._elInMenu=t.$refs.menu.getElementsByClassName("category-wrapper-hook"),t._elInGoods=t.$refs.goods.getElementsByClassName("food-category-list-hook")}))})},computed:{currentIndex:function(){var t=0,s=this.scrollY,e=this.goodsHeight;while(e[t+1]&&s>=e[t+1])t++;return t},cartContent:function(){var t=[];return this.goods.forEach(function(s){s.foods.forEach(function(s){s.count&&t.push(s)})}),t}},watch:{currentIndex:function(t){this.isClicked||this.scrollToInMenu(this.currentIndex,300)}},methods:{_initScroll:function(){var t=this;this._menuScroll=new c["a"](this.$refs.menu,{click:!0}),this._goodsScroll=new c["a"](this.$refs.goods,{click:!0,probeType:3}),this._goodsScroll.on("scroll",function(s){t.isClicked=!1,t.scrollY=Math.abs(Math.round(s.y))})},_calculateHeight:function(){var t=0,s=this.goodsHeight,e=this.$refs.goods.getElementsByClassName("food-category-list-hook");s.push(t);for(var a=0;a<e.length;a++)t+=e[a].clientHeight,s.push(t)},selectCategory:function(t,s){t._constructed&&(this.isClicked=!0,this.scrollToInGoods(s,0),this.scrollY=this.goodsHeight[s])},scrollToInGoods:function(t,s){this._goodsScroll.scrollToElement(this._elInGoods[t],s)},scrollToInMenu:function(t,s){this._menuScroll.scrollToElement(this._elInMenu[t],s)},addAnimate:function(t){this.$refs.cartContent.drop(t)},selectFood:function(t,s){s._constructed&&(this.selectedFood=t,this.isShowFood=!0)},hideFood:function(){this.isShowFood=!1}}},jt=Nt,Bt=(e("d920"),Object(v["a"])(jt,o,l,!1,null,"422844ac",null));Bt.options.__file="o-goods.vue";var Dt=Bt.exports,Ft=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"wrapper",staticClass:"ratings-wrapper"},[e("div",{staticClass:"container"},[e("div",{staticClass:"overview"},[e("div",{staticClass:"general-score"},[e("p",{staticClass:"final-score"},[t._v(t._s(t.seller.score))]),e("p",{staticClass:"item-title"},[t._v("综合评分")]),e("p",{staticClass:"rank-rate"},[t._v("高于周边商家"),e("span",{staticClass:"number"},[t._v(t._s(t.seller.rankRate))]),t._v("%")])]),e("div",{staticClass:"detail-score border-right-1px"},[e("div",{staticClass:"detail-item service-score-wrapper"},[e("span",{staticClass:"inner item-title"},[t._v("服务态度")]),e("div",{staticClass:"inner o-star-bar-wrapper"},[e("base-star-bar",{attrs:{size:36,score:t.seller.serviceScore}})],1),e("span",{staticClass:"inner number"},[t._v(t._s(t.seller.serviceScore))])]),e("div",{staticClass:"detail-item food-score-wrapper"},[e("span",{staticClass:"inner item-title"},[t._v("食物品质")]),e("div",{staticClass:"inner o-star-bar-wrapper"},[e("base-star-bar",{attrs:{size:36,score:t.seller.foodScore}})],1),e("span",{staticClass:"inner number"},[t._v(t._s(t.seller.foodScore))])]),e("div",{staticClass:"detail-item delivery-time-wrapper"},[e("span",{staticClass:"inner item-title"},[t._v("送达时间")]),e("span",{staticClass:"inner delivery-time"},[t._v(t._s(t.seller.deliveryTime)+"分钟")])])])]),e("div",{staticClass:"base-split-wrapper"},[e("base-split")],1),e("div",{staticClass:"o-rating-panel-wrapper"},[e("o-rating-panel",{attrs:{ratings:t.ratings,"is-for-food":!1}})],1)])])},It=[],Mt=0,At={components:{ORatingPanel:kt,BaseStarBar:pt,BaseSplit:I},props:{seller:{type:Object,default:function(){return{}}}},data:function(){return{ratings:[]}},created:function(){var t=this;this.$http.get("/api/ratings").then(function(s){var e=s.data;e&&e.errNum===Mt&&(t.ratings=e.data,t.$nextTick(function(){t.scroll||t.scroll.refresh()}))})},mounted:function(){this._initScroll()},methods:{_initScroll:function(){this.scroll=new c["a"](this.$refs.wrapper,{click:!0})}}},Rt=At,Ht=(e("4362d"),Object(v["a"])(Rt,Ft,It,!1,null,"7c7393b2",null));Ht.options.__file="o-ratings.vue";var zt=Ht.exports,Wt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper"},[e("div",{staticClass:"seller-wrapper"},[e("div",{staticClass:"overview"},[e("div",{staticClass:"content-top border-bottom-1px"},[e("div",{staticClass:"info"},[e("h2",{staticClass:"title"},[t._v(t._s(t.seller.name))]),e("div",{staticClass:"rate-and-sell"},[e("div",{staticClass:"base-star-bar-wrapper"},[e("base-star-bar",{staticClass:"star-bar",attrs:{size:36,score:t.seller.score}})],1),e("p",{staticClass:"rating-count"},[t._v("("+t._s(t.seller.ratingCount)+")")]),e("p",{staticClass:"sell-count"},[t._v("月售"+t._s(t.seller.sellCount)+"单")])])]),e("div",{staticClass:"store-wrapper"},[e("p",{staticClass:"store-icon",on:{click:t.toggleStore}},[e("span",{staticClass:"icon-favorite",class:{stored:t.isStored}})]),e("p",{staticClass:"store-state",on:{click:t.toggleStore}},[t._v(t._s(t.isStored?"已收藏":"收藏"))])])]),e("div",{staticClass:"content-bottom"},[e("div",{staticClass:"info-item"},[e("p",{staticClass:"info-title"},[t._v("起送价")]),e("p",{staticClass:"info-content"},[e("span",{staticClass:"number"},[t._v(t._s(t.seller.minPrice))]),t._v("元")])]),e("div",{staticClass:"info-item"},[e("p",{staticClass:"info-title"},[t._v("商家配送")]),e("p",{staticClass:"info-content"},[e("span",{staticClass:"number"},[t._v(t._s(t.seller.deliveryPrice))]),t._v("元")])]),e("div",{staticClass:"info-item"},[e("p",{staticClass:"info-title"},[t._v("平均配送时间")]),e("p",{staticClass:"info-content"},[e("span",{staticClass:"number"},[t._v(t._s(t.seller.deliveryTime))]),t._v("分钟")])])])]),e("div",{staticClass:"base-split-wrapper"},[e("base-split")],1),e("div",{staticClass:"bulletin-and-activity"},[e("h2",{staticClass:"title"},[t._v("公告与活动")]),e("p",{staticClass:"bulletin"},[t._v(t._s(t.seller.bulletin))]),e("ul",{staticClass:"supports"},t._l(t.seller.supports,function(s){return e("li",{key:s.description,staticClass:"support-item border-top-1px"},[e("span",{staticClass:"support-icon"},[e("base-icon",{attrs:{"type-num":s.type,"suffix-num":4}})],1),e("span",{staticClass:"support-desc"},[t._v(t._s(s.description))])])}),0)]),e("div",{staticClass:"base-split-wrapper"},[e("base-split")],1),e("div",{staticClass:"environment-images"},[e("h2",{staticClass:"title"},[t._v("商家实景")]),e("div",{ref:"imagesWrapper",staticClass:"images-wrapper"},[e("ul",{ref:"imageList",staticClass:"image-list"},t._l(t.seller.pics,function(t){return e("li",{key:t,staticClass:"image-item"},[e("img",{staticClass:"img",attrs:{src:t,alt:"商家图片"}})])}),0)])]),e("div",{staticClass:"base-split-wrapper"},[e("base-split")],1),e("div",{staticClass:"seller-info"},[e("h2",{staticClass:"title"},[t._v("商家信息")]),e("ul",{staticClass:"info-content"},t._l(t.seller.infos,function(s){return e("li",{key:s,staticClass:"info-item"},[t._v(t._s(s))])}),0)])])])},Lt=[],Yt=(e("386d"),e("28a5"),"__order-app__");function Gt(t,s){window.localStorage[Yt+t]=s}function Jt(t){return window.localStorage[Yt+t]}function Ut(t,s,e){var a=Jt("sellers");a=a?JSON.parse(a):{};var i=a[t]||{};i[s]=e,a[t]=i,Gt("sellers",JSON.stringify(a))}function Kt(t,s,e){var a=Jt("sellers");if(!a)return e;a=JSON.parse(a);var i=a[t];return i?void 0===i[s]?e:i[s]:e}function Xt(){var t=window.location.search.slice(1).split("&"),s={};return t[0]&&t.forEach(function(t){var e=t.split("=");1===e.length&&(e[1]=""),s[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}),s}var qt={components:{BaseStarBar:pt,BaseSplit:I,BaseIcon:m},props:{seller:{type:Object,default:function(){return{}}}},data:function(){var t=this;return{isStored:function(){return!!t.seller.id&&Kt(t.seller.id,"isStored",!1)}()}},mounted:function(){this.allScroll=new c["a"](this.$refs.scrollWrapper,{click:!0}),this._setImagesScroll()},watch:{seller:function(){this._setImagesScroll()}},methods:{_setImagesScroll:function(){var t=this;if(this.seller.pics){var s=120,e=6,a=this.seller.pics.length,i=this.$refs.imageList,n=(s+e)*a-e;i.style.width=n+"px"}this.$nextTick(function(){t.imagesScroll?t.imagesScroll.refresh():t.imagesScroll=new c["a"](t.$refs.imagesWrapper,{scrollX:!0,eventPassThrough:"vertical"})})},toggleStore:function(t){t._constructed&&(this.isStored=!this.isStored,Ut(this.seller.id,"isStored",this.isStored))}}},Qt=qt,Vt=(e("bdcb"),Object(v["a"])(Qt,Wt,Lt,!1,null,"8959ab64",null));Vt.options.__file="o-seller.vue";var Zt=Vt.exports;a["a"].use(r["a"]);var ts=[{path:"/",redirect:"/goods"},{path:"/goods",component:Dt},{path:"/ratings",component:zt},{path:"/seller",component:Zt}],ss=new r["a"]({routes:ts,linkActiveClass:"active-link"});n.a.defaults.baseURL="/order-app/",n.a.interceptors.request.use(function(t){var s=t.url.replace(/api\/([^\/\?]+)/,"mock/data.json");return t.url=s,t.dataKey=RegExp.$1,t}),n.a.interceptors.response.use(function(t){return t.data={errNum:0,data:t.data[t.config.dataKey]},t});var es=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("o-header",{attrs:{seller:t.seller}}),e("div",{staticClass:"tab border-bottom-1px"},[e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/goods"}},[t._v("商品")])],1),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/ratings"}},[t._v("评论")])],1),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/seller"}},[t._v("商家")])],1)]),e("keep-alive",[e("router-view",{attrs:{seller:t.seller}})],1)],1)},as=[],is=(e("f751"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"header"},[e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"seller-avatar"},[e("img",{attrs:{src:t.seller.avatar,alt:"商家封面"}})]),e("div",{staticClass:"seller-content"},[e("h1",{staticClass:"title"},[e("span",{staticClass:"brand"}),e("span",{staticClass:"title-text"},[t._v(t._s(t.seller.name))])]),e("div",{staticClass:"description"},[t._v(t._s(t.seller.description)+" / "+t._s(t.seller.deliveryTime)+"分钟送达")]),t.seller.supports?e("div",{staticClass:"support"},[e("base-icon",{staticClass:"support-icon",attrs:{typeNum:t.seller.supports[0].type,suffixNum:1}}),e("span",{staticClass:"support-text"},[t._v(t._s(t.seller.supports[0].description))])],1):t._e()]),t.seller.supports?e("div",{staticClass:"support-more",on:{click:t.showDetail}},[t._v("\n      "+t._s(t.seller.supports.length)+"个\n      "),e("span",{staticClass:"iconfont icon-keyboard_arrow_right"})]):t._e()]),e("div",{staticClass:"bulletin",on:{click:t.showDetail}},[e("span",{staticClass:"bulletin-title"}),e("span",{staticClass:"bulletin-sample"},[t._v(t._s(t.seller.bulletin))]),e("span",{staticClass:"bulletin-detail iconfont icon-keyboard_arrow_right"})]),e("div",{staticClass:"background"},[e("img",{attrs:{src:t.seller.avatar,alt:"商家图片背景"}})]),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowDetail,expression:"isShowDetail"}],staticClass:"seller-detail",attrs:{transition:"fade"}},[e("div",{staticClass:"detail-wrapper clearfix"},[e("div",{staticClass:"detail-main"},[e("h1",{staticClass:"seller-name"},[t._v(t._s(t.seller.name))]),e("div",{staticClass:"stars"},[e("base-star-bar",{attrs:{size:48,score:t.seller.score}})],1),e("div",{staticClass:"favourable-info"},[e("div",{staticClass:"title"},[e("div",{staticClass:"line"}),e("h2",{staticClass:"text"},[t._v("优惠信息")]),e("div",{staticClass:"line"})]),t.seller.supports?e("ul",{staticClass:"list"},t._l(t.seller.supports,function(s){return e("li",{key:s.type,staticClass:"support-item"},[e("base-icon",{staticClass:"support-icon",attrs:{typeNum:s.type,suffixNum:2}}),e("span",{staticClass:"text"},[t._v(t._s(s.description))])],1)}),0):t._e()]),e("div",{staticClass:"bulletin-detail"},[e("div",{staticClass:"title"},[e("div",{staticClass:"line"}),e("h2",{staticClass:"text"},[t._v("商家公告")]),e("div",{staticClass:"line"})]),e("div",{staticClass:"bulletion-content"},[t._v("\n              "+t._s(t.seller.bulletin)+"\n            ")])])])]),e("div",{staticClass:"detail-close"},[e("span",{staticClass:"iconfont icon-close",on:{click:t.hideDetail}})])])])],1)}),ns=[],rs={props:{seller:{type:Object}},data:function(){return{isShowDetail:!1}},methods:{showDetail:function(){this.isShowDetail=!0},hideDetail:function(){this.isShowDetail=!1}},components:{BaseStarBar:pt,BaseIcon:m}},os=rs,ls=(e("2577"),Object(v["a"])(os,is,ns,!1,null,"5f3247aa",null));ls.options.__file="o-header.vue";var cs=ls.exports,us=0,ds={data:function(){return{seller:{id:function(){return Xt().id||1e3}()}}},components:{OHeader:cs},created:function(){var t=this;this.$http.get("/api/seller?id="+this.seller.id).then(function(s){s.data&&s.data.errNum===us&&(t.seller=Object.assign({},t.seller,s.data.data))},function(t){console.log(t)})}},ps=ds,fs=(e("8cd3"),Object(v["a"])(ps,es,as,!1,null,"70440a66",null));fs.options.__file="App.vue";var vs=fs.exports;e("f867");a["a"].config.productionTip=!1,a["a"].prototype.$http=n.a,new a["a"]({render:function(t){return t(vs)},router:ss}).$mount("#app")},"5e56":function(t,s,e){},7720:function(t,s,e){"use strict";var a=e("a1d2"),i=e.n(a);i.a},"7cd0":function(t,s,e){},"7f96":function(t,s,e){"use strict";var a=e("4840"),i=e.n(a);i.a},"842c":function(t,s,e){},"8cd3":function(t,s,e){"use strict";var a=e("ce07"),i=e.n(a);i.a},a1d2:function(t,s,e){},b587:function(t,s,e){},b5f2:function(t,s,e){},bdcb:function(t,s,e){"use strict";var a=e("b587"),i=e.n(a);i.a},c1f2:function(t,s,e){},ce07:function(t,s,e){},d7f1:function(t,s,e){"use strict";var a=e("842c"),i=e.n(a);i.a},d920:function(t,s,e){"use strict";var a=e("123d"),i=e.n(a);i.a},de5c:function(t,s,e){},def4:function(t,s,e){"use strict";var a=e("5e56"),i=e.n(a);i.a},f753:function(t,s,e){"use strict";var a=e("7cd0"),i=e.n(a);i.a},f867:function(t,s,e){}});
//# sourceMappingURL=app.909dab52.js.map